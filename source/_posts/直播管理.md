---
title: 直播管理
date: 2020-01-20 17:24:35
tags: 前端
categories: 其他
---
#  在线教育直播系统

## 基础结构

### App直播端(react-native):

- 技术栈:react-native、redux(状态管理)、typescript、react-navigation(导航)、react-native-storage(全局状态存储)、react-native-vector-icons(图标)、[socket.io](http://socket.io/)-client(实时聊天)、axios(网络请求)

- gitlab地址: [直播端](https://git.orhontech.com/OpenCloud/Frontend/application/app-live)

- 页面结构:

  > android(android项目)
  >
  > ios(ios项目)
  >
  > src
  >
  > > config(项目配置信息)
  > >
  > > model(interface接口)
  > >
  > > navigation(导航)
  > >
  > > pages(页面)
  > >
  > > > auth(首次加载页面、鉴权页面、登录页面)
  > > >
  > > > home(直播页面)
  > >
  > > store(redux全局状态管理)
  > >
  > > utils(工具信息)
  > >
  > > > request(请求处理axios)
  > > >
  > > > common(公共的方法)
  > > >
  > > > constant(常量列表)
  > > >
  > > > data-stored(本地数据存储)

- 实现功能:

  登录功能, 直播功能, 可以查看客户端发送的消息,消息列表

### App客户端(ionic)

- 技术栈: ionic、cordova、[flv播放器](https://github.com/bilibili/flv.js)、[socket.io](http://socket.io/)-client

- Gitlab地址: [客户端app](https://git.orhontech.com/OpenCloud/Frontend/application/app-client)

- 页面结构:

  > src
  >
  > > config(配置信息)
  > >
  > > guard(路由鉴权)
  > >
  > > pages(页面)
  > >
  > > > login(登录页面)
  > > >
  > > > video(播放界面)
  > >
  > > service(服务)
  > >
  > > > permissions(登录逻辑、用户信息获取)
  > > >
  > > > request(http请求)
  > > >
  > > > utils(工具类)
  > > >
  > > > Constant.ts(常量列表)
  > >
  > > tabs(导航)

- 实现功能

  获取指定部门 人员的直播列表，播放直播，直播互动，可以发送消息，消息列表。

### 直播端后台管理(angular)

- 技术栈: angular、[ng-alain(基于脚手架创建项目,使用了@delon扩展包)](https://ng-alain.com/zh)、[flv播放器](https://github.com/bilibili/flv.js)、rxjs

- gitlab地址: [后台管理](https://git.orhontech.com/OpenCloud/Frontend/application/app-front.git)

- 页面结构

  > src
  >
  > > app
  > >
  > > > config(配置信息)
  > > >
  > > > core(核心模块->只会被导入一次)
  > > >
  > > > layout(页面布局,header,footer,content)
  > > >
  > > > routes(页面路由)
  > > >
  > > > > live(直播管理)
  > > > >
  > > > > sys(系统管理)
  > > > >
  > > > > > department(部门管理)
  > > > > >
  > > > > > role(角色管理)
  > > > > >
  > > > > > user(用户管理)
  > > >
  > > > service(服务)
  > > >
  > > > shared(共享模块)

- 实现功能:

  部门(增删改)、角色(增删改)、用户(增删改)、直播管理（超级管理员进去查看所有人的直播状态,在线人数、观看次数 )、部门管理员进入只能查看新增 用户、自己部门直播实时状态

### Node流媒体直播服务

- 技术栈: [node-media-server、axios、moment](https://github.com/illuspas/Node-Media-Server)

- gitlab地址: [node流媒体服务器](https://git.orhontech.com/OpenCloud/Frontend/application/app-node)

- 页面结构:

  > app.js(流媒体入口)
  >
  > Auth_app.js(用户认证)
  >
  > Mp4_app.js(本地配置存储mp4)
  >
  > Multi_app(开启服务启动多核)

- 实现功能:

  推流、拉流。 实现监控 (连接、断开，开启推送、结束推送)直播流，播放流

### 后台管理(egg)

- 技术栈: [egg](https://eggjs.org/zh-cn/)、egg-cors(跨域)、egg-jwt(jwt)、egg-mongoose(mongo数据库)、egg-redis(redis)、[egg-socket.io](http://egg-socket.io/)([socket.io](http://socket.io/))、egg-validate(post请求参数校验)

- gilab地址: [后台](https://git.orhontech.com/OpenCloud/Frontend/application/app-node/tree/master/live-back)

- 页面结构:

  > app
  >
  > > controller(请求参数处理)
  > >
  > > extend(扩展配置)
  > >
  > > > helper(辅助处理相应，返回数据格式)
  > >
  > > io([socket.io](http://socket.io/))
  > >
  > > > controller(处理exange(发送消息事件))
  > > >
  > > > middleware(中间件,拦截sock消息处理，加入房间，在线人数，离开房间)
  > >
  > > middleware(错误处理中间件)
  > >
  > > model(mongo模型)
  > >
  > > public(静态资源)
  > >
  > > service(服务，处理和数据库交互)
  > >
  > > router(路由)
  >
  > config(配置)
  >
  > > config.default.js(默认配置)
  > >
  > > > plugin.js(插件配置)

- 实现功能:

  角色管理、权限管理、用户管理、文件上传、部门管理、直播信息统计、观看人数、直播单条数据、[socket.io](http://socket.io/)实现p2p聊天